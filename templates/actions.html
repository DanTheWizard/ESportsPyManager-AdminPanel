{% extends "base.html" %}
{% block title %}Device Actions - Admin Panel{% endblock %}
{% block content %}



<h2>üü¢ Online Devices</h2>



<h2>Device Actions</h2>

<form method="POST" action="{{ url_for('api_routes.send_action') }}">
    <div id="sel_bulk_line" class="sel_bulk_line">
        <label>
            <input type="checkbox" id="select_all"> All PCs
        </label>

        <h3>üîÅ Bulk Action</h3> {# Originally with style="margin-top: 2em;" #}
        <label>Action:
            <select name="bulk_action" id="bulk_action">
                <option value="none">none</option>
                <option value="test">test</option>
                <option value="shutdown">shutdown</option>
                <option value="say">say</option>
                <option value="MCEdu">MCEdu</option>
            </select>
        </label>
        <label for="bulk_argument"></label><input type="text" name="bulk_argument" id="bulk_argument" placeholder="Optional Argument" style="display:none;">
        <br><br>
        <input type="text" id="bulk_argument" class="arg-box" style="display:none;">
        <button id="bulk_execute" type="button">Execute Bulk Action</button>
    </div>
    <!-- ------------------------------------------------------------------------------------- -->

    <table border="1"> {# Originally: style="width:100%; margin-top: 1em;" #}
        <thead>
            <tr>
                <th>Select</th>
                <th>Nickname</th>
                <th>Tag</th>
                <th>Machine ID</th>
                <th>Action</th>
                <th>Argument</th>
            </tr>
        </thead>
    <tbody id="device-table-body">
    </tbody>
    </table>

    <!-- ------------------------------------------------------------------------------------- -->

    <hr>
    <h3>‚ö´ Offline Devices (no ping in last {{ OFFLINE_DEVICE_TIMEOUT }} s)</h3>
    <ul id="offline-list">
      <li>Loading‚Ä¶</li>
    </ul>

</form>


<script>
    window.FLASK_ROUTES = {
        api_device_statuses: "{{ url_for('api_routes.api_device_statuses') }}",
        send_action_device: "{{ url_for('api_routes.send_action_device') }}",
        send_action: "{{ url_for('api_routes.send_action') }}",
    };
    window.REFRESH_TIMEOUT = {{REFRESH_TIMEOUT_MS}}

  document.addEventListener("DOMContentLoaded", function () {
      const script = document.createElement('script');
      script.src = "{{ url_for('static', filename='js/actions.js') }}";
      document.head.appendChild(script);
  });
</script>



<style>
    #sel_bulk_line {
        display: flex;
        align-items: center;
        gap: 1em;
    }
</style>




{% endblock %}