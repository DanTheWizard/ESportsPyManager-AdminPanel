{% extends "base.html" %}
{% block title %}Overview - Admin Panel{% endblock %}

{% block content %}


    <h2>ðŸŸ¢ Online Devices</h2>
    <table class="overview_online"> {# border="1" style="width:100%; margin-top: 1em;" #}
        <thead>
            <tr>
                <th class="nickname">Nickname</th>
                <th class="tag"     >Tag</th>
                <th class="CPU_perc">CPU %</th>
                <th class="RAM_perc">RAM %</th>
                <th class="username">User</th>
                <th class="ACTV_app">Active App</th>
            </tr>
        </thead>
        <tbody id="overview-online-body">
            <tr>
                <td colspan="6">Loading online devices...</td>
            </tr>
        </tbody>
    </table>

    <h3 style="margin-top: 2em;">âš« Offline Devices (no ping in last {{ OFFLINE_DEVICE_TIMEOUT }} s)</h3>
    <ul id="overview-offline-list">
        <li>Loading the offline list...</li>
    </ul>

    <script>
        window.FLASK_ROUTES = {
            api_overview_data: "{{ url_for('app_routes.api_overview_data') }}",
        };
        window.REFRESH_TIMEOUT = {{ REFRESH_TIMEOUT_MS }}

        document.addEventListener("DOMContentLoaded", function() {
            const script = document.createElement('script');
            script.src = "{{ url_for('static', filename='js/overview.js') }}";
            document.head.appendChild(script);
        });
    </script>

    <style>
        .overview_online {
          width: 100%; /* Make the table fill the container */
          border-collapse: collapse; /* Remove default cell spacing */
        }

        .overview_online th, .overview_online td {
          border: 1px solid black; /* Add a border for visibility */
        }

        .overview_online .nickname,
        .overview_online .tag      {
          width: 10%;
        }

        .overview_online .CPU_perc,
        .overview_online .RAM_perc {
          width: 5%;
        }

        .overview_online .username {
          width: 15%;
        }

        .overview_online .ACTV_app {
          width: 55%;
        }
    </style>

    <style>
        table.overview_online {
          border: 1px solid #1C6EA4;
          background-color: #EEEEEE;
          width: 100%;
          text-align: left;
          border-collapse: collapse;
        }
        table.overview_online td, table.overview_online th {
          border: 1px solid #AAAAAA;
          padding: 3px 2px;
        }
        table.overview_online tbody td {
          font-size: 13px;
        }
        table.overview_online tr:nth-child(even) {
          background: #D0E4F5;
        }
        table.overview_online thead {
          background: #1C6EA4;
          background: -moz-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
          background: -webkit-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
          background: linear-gradient(to bottom, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
          border-bottom: 2px solid #444444;
        }
        table.overview_online thead th {
          font-size: 15px;
          font-weight: bold;
          color: #FFFFFF;
          border-left: 2px solid #D0E4F5;
        }
        table.overview_online thead th:first-child {
          border-left: none;
        }
    </style>

{% endblock %}